version: '3.4'
services:
  api:
    build:
      context: ./coffee-service
      dockerfile: Dockerfile
    ports:
      - "8080:8080"
    networks:
      - coffee-service-network
    depends_on:
      - nats
  nats-server:
    image: nats
    ports:
      - "4222:4222" # nats default port
      - "8222:8222" # nats monitor port
    command: "--name nats-server --http_port 8222"
    networks:
      - coffee-service-network

networks:
  coffee-service-network:
    driver: bridge